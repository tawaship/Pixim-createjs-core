{"version":3,"file":"pixi-animate-core.esm.js","sources":["../src/createjs/core.ts","../src/createjs/Stage.ts","../src/createjs/StageGL.ts","../src/createjs/utils.ts","../src/createjs/EventManager.ts","../src/createjs/ButtonHelper.ts","../src/createjs/MovieClip.ts","../src/createjs/Sprite.ts","../src/createjs/Shape.ts","../src/createjs/Bitmap.ts","../src/createjs/Graphics.ts","../src/createjs/Text.ts","../src/core.ts"],"sourcesContent":["import { DisplayObject, Container, Point } from 'pixi.js';\r\nimport { CreatejsColorFilter } from './ColorFilter';\r\nimport { CreatejsButtonHelper } from './ButtonHelper';\r\nimport { CreatejsStage } from './Stage';\r\nimport { CreatejsStageGL } from './StageGL';\r\nimport { CreatejsMovieClip, PixiMovieClip } from './MovieClip';\r\nimport { CreatejsSprite } from './Sprite';\r\nimport { CreatejsShape } from './Shape';\r\nimport { CreatejsBitmap } from './Bitmap';\r\nimport { CreatejsGraphics } from './Graphics';\r\nimport { CreatejsText } from './Text';\r\n\r\ntype TCreatejsDisplayObject = any/* createjs.DisplayObject */;\r\n\r\n/**\r\n * [[http://pixijs.download/release/docs/PIXI.Point.html | PIXI.Point]]\r\n */\r\ndeclare class PixiPoint {};\r\n\r\nexport { Point as PixiPoint };\r\n\r\nexport interface ITickerData {\r\n\tdelta: number;\r\n}\r\n\r\nexport interface IPixiData<T extends DisplayObject> {\r\n\tregObj: Point;\r\n\tinstance: T;\r\n}\r\n\r\nexport function createPixiData<TPixiDisplayObject extends DisplayObject>(pixi: TPixiDisplayObject, regObj: Point): IPixiData<TPixiDisplayObject> {\r\n\treturn {\r\n\t\tregObj,\r\n\t\tinstance: pixi\r\n\t};\r\n}\r\n\r\nexport type TCreatejsMask = CreatejsShape | null;\r\n\r\nexport type TCreatejsColorFilters = CreatejsColorFilter[] | null;\r\n\r\nexport interface ICreatejsParam {\r\n\tx: number;\r\n\ty: number;\r\n\tscaleX: number;\r\n\tscaleY: number;\r\n\tregX: number;\r\n\tregY: number;\r\n\tskewX: number;\r\n\tskewY: number;\r\n\trotation: number;\r\n\tvisible: boolean;\r\n\talpha: number;\r\n\t_off: boolean;\r\n\tmask: CreatejsShape | null;\r\n\tfilters: TCreatejsColorFilters;\r\n}\r\n\r\nexport type TCreatejsObject =\r\n\tCreatejsStage\r\n\t| CreatejsStageGL\r\n\t| CreatejsMovieClip\r\n\t| CreatejsSprite\r\n\t| CreatejsShape\r\n\t| CreatejsBitmap\r\n\t| CreatejsGraphics\r\n\t| CreatejsText;\r\n\r\nexport function createCreatejsParams(): ICreatejsParam {\r\n\treturn {\r\n\t\tx: 0,\r\n\t\ty: 0,\r\n\t\tscaleX: 0,\r\n\t\tscaleY: 0,\r\n\t\tregX: 0,\r\n\t\tregY: 0,\r\n\t\tskewX: 0,\r\n\t\tskewY: 0,\r\n\t\trotation: 0,\r\n\t\tvisible: true,\r\n\t\talpha: 1,\r\n\t\t_off: false,\r\n\t\tmask: null,\r\n\t\tfilters: null\r\n\t};\r\n}\r\n\r\nexport interface IExpandedCreatejsDisplayObject extends TCreatejsDisplayObject {\r\n\tupdateForPixi(e: ITickerData): boolean;\r\n}\r\n\r\nexport function updateDisplayObjectChildren(cjs: IExpandedCreatejsDisplayObject, e: ITickerData) {\r\n\tconst list = cjs.children.slice();\r\n\tfor (let i = 0, l = list.length; i < l; i++) {\r\n\t\tconst child = list[i];\r\n\t\tif (!child.isVisible()) { continue; }\r\n\t\t//child.draw();\r\n\t\tchild.updateForPixi(e);\r\n\t}\r\n\t\r\n\treturn true;\r\n}","import createjs from '@tawaship/createjs-module';\r\nimport { updateDisplayObjectChildren, ITickerData, IExpandedCreatejsDisplayObject } from './core';\r\n\r\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/Stage.html | createjs.Stage]]\r\n */\r\nexport class CreatejsStage extends createjs.Stage implements IExpandedCreatejsDisplayObject {\r\n\tupdateForPixi(props: ITickerData) {\r\n\t\tif (this.tickOnUpdate) { this.tick(props); }\r\n\t\tthis.dispatchEvent(\"drawstart\");\r\n\t\tupdateDisplayObjectChildren(this, props);\r\n\t\tthis.dispatchEvent(\"drawend\");\r\n\t\t\r\n\t\treturn true;\r\n\t}\r\n}","import createjs from '@tawaship/createjs-module';\r\nimport { updateDisplayObjectChildren, ITickerData, IExpandedCreatejsDisplayObject } from './core';\r\n\r\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/StageGL.html | createjs.StageGL]]\r\n */\r\nexport class CreatejsStageGL extends createjs.StageGL implements IExpandedCreatejsDisplayObject {\r\n\tupdateForPixi(props: ITickerData) {\r\n\t\tif (this.tickOnUpdate) { this.tick(props); }\r\n\t\tthis.dispatchEvent(\"drawstart\");\r\n\t\tupdateDisplayObjectChildren(this, props);\r\n\t\tthis.dispatchEvent(\"drawend\");\r\n\t\t\r\n\t\treturn true;\r\n\t}\r\n}","export function createObject<T>(proto: object): T {\r\n\treturn Object.create(proto);\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nexport const DEG_TO_RAD = Math.PI / 180;","import { TCreatejsObject, IExpandedCreatejsDisplayObject } from './core';\r\nimport { DisplayObject } from 'pixi.js';\r\n\r\nexport type TCreatejsInteractionEvent = 'mousedown' | 'rollover' | 'rollout' | 'pressmove' | 'pressup';\r\n\r\nexport type TPixiInteractionEvent = 'pointerdown' | 'pointerover' | 'pointerout' | 'pointermove' | 'pointerup' | 'pointerupoutside';\r\n\r\nexport interface ICreatejsInteractionEventDelegate {\r\n\t (e: any): void;\r\n}\r\n\r\nexport interface IPixiInteractionEventDelegate {\r\n\t (e: any): void;\r\n}\r\n\r\nexport interface ICreatejsInteractionEventData {\r\n\ttypes: TPixiInteractionEvent[];\r\n\tfactory(cb: ICreatejsInteractionEventDelegate): IPixiInteractionEventDelegate;\r\n}\r\n\r\nexport class EventManager {\r\n\tprivate _isDown: boolean = false;\r\n\tprivate _events: { [name in TPixiInteractionEvent]: { func: IPixiInteractionEventDelegate, origin: ICreatejsInteractionEventDelegate  }[] };\r\n\tprivate _data: { [name in TCreatejsInteractionEvent]: ICreatejsInteractionEventData };\r\n\t\r\n\tconstructor(cjs: TCreatejsObject) {\r\n\t\tthis._events = {\r\n\t\t\tpointerdown: [],\r\n\t\t\tpointerover: [],\r\n\t\t\tpointerout: [],\r\n\t\t\tpointermove: [],\r\n\t\t\tpointerup: [],\r\n\t\t\tpointerupoutside: []\r\n\t\t};\r\n\t\t\r\n\t\tthis._data = {\r\n\t\t\tmousedown:{\r\n\t\t\t\ttypes: ['pointerdown'],\r\n\t\t\t\tfactory: (cb: ICreatejsInteractionEventDelegate) => {\r\n\t\t\t\t\treturn this._mousedownFactory(cjs, cb);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\trollover: {\r\n\t\t\t\ttypes: ['pointerover'],\r\n\t\t\t\tfactory: (cb: ICreatejsInteractionEventDelegate) => {\r\n\t\t\t\t\treturn this._rolloverFactory(cjs, cb);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\trollout: {\r\n\t\t\t\ttypes: ['pointerout'],\r\n\t\t\t\tfactory: (cb: ICreatejsInteractionEventDelegate) => {\r\n\t\t\t\t\treturn this._rolloutFactory(cjs, cb);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tpressmove: {\r\n\t\t\t\ttypes: ['pointermove'],\r\n\t\t\t\tfactory: (cb: ICreatejsInteractionEventDelegate) => {\r\n\t\t\t\t\tconsole.log(cb)\r\n\t\t\t\t\treturn this._pressmoveFactory(cjs, cb);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tpressup: {\r\n\t\t\t\ttypes: ['pointerup', 'pointerupoutside'],\r\n\t\t\t\tfactory: (cb: ICreatejsInteractionEventDelegate) => {\r\n\t\t\t\t\treturn this._pressupFactory(cjs, cb);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tadd(pixi: DisplayObject, type: TCreatejsInteractionEvent, cb: ICreatejsInteractionEventDelegate) {\r\n\t\tconst data = this._data[type];\r\n\t\t\r\n\t\tconst types = data.types;\r\n\t\tconst func = data.factory(cb);\r\n\t\t\r\n\t\tfor (let i = 0; i < types.length; i++) {\r\n\t\t\tconst t = types[i];\r\n\t\t\tthis._events[t].push({ func, origin: cb });\r\n\t\t\t\r\n\t\t\tpixi.on(t, func);\r\n\t\t}\r\n\t\t\r\n\t\tpixi.interactive = true;\r\n\t}\r\n\t\r\n\tremove(pixi: DisplayObject, type: TCreatejsInteractionEvent, cb: ICreatejsInteractionEventDelegate) {\r\n\t\tconst data = this._data[type];\r\n\t\t\r\n\t\tconst types = data.types;\r\n\t\t\r\n\t\tfor (let i = 0; i < types.length; i++) {\r\n\t\t\tconst t = types[i];\r\n\t\t\t\r\n\t\t\tconst list = this._events[t];\r\n\t\t\t\r\n\t\t\tif (list) {\r\n\t\t\t\tfor (var j = list.length - 1; j >= 0; j--) {\r\n\t\t\t\t\tif (list[j].origin === cb) {\r\n\t\t\t\t\t\tpixi.off(t, list[j].func);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tlist.splice(j, 1);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (list.length === 0) {\r\n\t\t\t\t\tthis._events[t] = [];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tprivate _mousedownFactory(cjs: TCreatejsObject, cb: ICreatejsInteractionEventDelegate) {\r\n\t\treturn (e: any) => {\r\n\t\t\te.currentTarget = e.currentTarget.createjs;\r\n\t\t\t\r\n\t\t\te.target = e.target.createjs;\r\n\t\t\tconst ev = e.data;\r\n\t\t\te.rawX = ev.global.x;\r\n\t\t\te.rawY = ev.global.y;\r\n\t\t\t\r\n\t\t\tthis._isDown = true;\r\n\t\t\t\r\n\t\t\tcb(e);\r\n\t\t};\r\n\t}\r\n\t\r\n\tprivate _rolloverFactory(cjs: TCreatejsObject, cb: ICreatejsInteractionEventDelegate) {\r\n\t\treturn (e: any) => {\r\n\t\t\te.currentTarget = e.currentTarget.createjs;\r\n\t\t\t\r\n\t\t\te.target = e.currentTarget.createjs;\r\n\t\t\tconst ev = e.data;\r\n\t\t\te.rawX = ev.global.x;\r\n\t\t\te.rawY = ev.global.y;\r\n\t\t\t\r\n\t\t\tthis._isDown = true;\r\n\t\t\t\r\n\t\t\tcb(e);\r\n\t\t};\r\n\t}\r\n\t\r\n\tprivate _rolloutFactory(cjs: TCreatejsObject, cb: ICreatejsInteractionEventDelegate) {\r\n\t\treturn (e: any) => {\r\n\t\t\te.currentTarget = e.currentTarget.createjs;\r\n\t\t\t\r\n\t\t\te.target = e.currentTarget.createjs;\r\n\t\t\tconst ev = e.data;\r\n\t\t\te.rawX = ev.global.x;\r\n\t\t\te.rawY = ev.global.y;\r\n\t\t\t\r\n\t\t\tthis._isDown = true;\r\n\t\t\t\r\n\t\t\tcb(e);\r\n\t\t};\r\n\t}\r\n\t\r\n\tprivate _pressmoveFactory(cjs: TCreatejsObject, cb: ICreatejsInteractionEventDelegate) {\r\n\t\treturn (e: any) => {\r\n\t\t\tif (!this._isDown) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\te.currentTarget = cjs;\r\n\t\t\t\r\n\t\t\te.target = e.target && e.target.createjs;\r\n\t\t\tconst ev = e.data;\r\n\t\t\te.rawX = ev.global.x;\r\n\t\t\te.rawY = ev.global.y;\r\n\t\t\t\r\n\t\t\tcb(e);\r\n\t\t};\r\n\t}\r\n\t\r\n\tprivate _pressupFactory(cjs: TCreatejsObject, cb: ICreatejsInteractionEventDelegate) {\r\n\t\treturn (e: any) => {\r\n\t\t\tif (!this._isDown) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\te.currentTarget = cjs;\r\n\t\t\t\r\n\t\t\tthis._isDown = false;\r\n\t\t\t\r\n\t\t\te.target = e.target && e.target.createjs;\r\n\t\t\tconst ev = e.data;\r\n\t\t\te.rawX = ev.global.x;\r\n\t\t\te.rawY = ev.global.y;\r\n\t\t\t\r\n\t\t\tcb(e);\r\n\t\t};\r\n\t}\r\n}","import createjs from '@tawaship/createjs-module';\r\n\r\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/ButtonHelper.html | createjs.ButtonHelper]]\r\n */\r\nexport class CreatejsButtonHelper extends createjs.ButtonHelper {\r\n\tconstructor(...args: any[]) {\r\n\t\tsuper(...args);\r\n\t\t\r\n\t\tconst createjs = args[0];\r\n\t\tconst pixi = createjs.pixi;\r\n\t\t\r\n\t\tconst baseFrame = args[1];\r\n\t\tconst overFrame = args[2];\r\n\t\tconst downFrame = args[3];\r\n\t\tconst hit = arguments[5];\r\n\t\tconst hitFrame = args[6];\r\n\t\t\r\n\t\thit.gotoAndStop(hitFrame);\r\n\t\tconst hitPixi = pixi.addChild(hit.pixi);\r\n\t\thitPixi.alpha = 0.00001;\r\n\t\t\r\n\t\tlet isOver = false;\r\n\t\tlet isDown = false;\r\n\t\t\r\n\t\thitPixi.on('pointerover', function() {\r\n\t\t\tisOver = true;\r\n\t\t\tif (isDown) {\r\n\t\t\t\tcreatejs.gotoAndStop(downFrame);\r\n\t\t\t} else {\r\n\t\t\t\tcreatejs.gotoAndStop(overFrame);\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\thitPixi.on('pointerout', function() {\r\n\t\t\tisOver = false;\r\n\t\t\t\r\n\t\t\tif (isDown) {\r\n\t\t\t\tcreatejs.gotoAndStop(overFrame);\r\n\t\t\t} else {\r\n\t\t\t\tcreatejs.gotoAndStop(baseFrame);\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\thitPixi.on('pointerdown', function() {\r\n\t\t\tisDown = true;\r\n\t\t\tcreatejs.gotoAndStop(downFrame);\r\n\t\t});\r\n\t\t\r\n\t\thitPixi.on('pointerup', function() {\r\n\t\t\tisDown = false;\r\n\t\t\tif (isOver) {\r\n\t\t\t\tcreatejs.gotoAndStop(overFrame);\r\n\t\t\t} else {\r\n\t\t\t\tcreatejs.gotoAndStop(baseFrame);\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\thitPixi.on('pointerupoutside', function() {\r\n\t\t\tisDown = false;\r\n\t\t\tif (isOver) {\r\n\t\t\t\tcreatejs.gotoAndStop(overFrame);\r\n\t\t\t} else {\r\n\t\t\t\tcreatejs.gotoAndStop(baseFrame);\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\thitPixi.interactive = true;\r\n\t\thitPixi.cursor = 'pointer';\r\n\t}\r\n}","import { DisplayObject, Container, filters } from 'pixi.js';\r\nimport createjs from '@tawaship/createjs-module';\r\nimport { CreatejsColorFilter } from './ColorFilter';\r\nimport { createPixiData, createCreatejsParams, IPixiData, ICreatejsParam, updateDisplayObjectChildren, ITickerData, TCreatejsColorFilters, TCreatejsMask, IExpandedCreatejsDisplayObject } from './core';\r\nimport { createObject, DEG_TO_RAD } from './utils';\r\nimport { EventManager, TCreatejsInteractionEvent, ICreatejsInteractionEventDelegate } from './EventManager';\r\nimport { CreatejsButtonHelper } from './ButtonHelper';\r\nimport { CreatejsShape } from './Shape';\r\n\r\n/**\r\n * [[http://pixijs.download/release/docs/PIXI.Container.html | PIXI.Container]]\r\n */\r\nexport class PixiMovieClip extends Container {\r\n\tprivate _createjs: CreatejsMovieClip;\r\n\tprivate _filterContainer: Container | null = null;\r\n\t\r\n\tconstructor(cjs: CreatejsMovieClip) {\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis._createjs = cjs;\r\n\t}\r\n\t\r\n\tget filterContainer() {\r\n\t\treturn this._filterContainer;\r\n\t}\r\n\t\r\n\tset filterContainer(value) {\r\n\t\tthis._filterContainer = value;\r\n\t}\r\n\t\r\n\tget createjs() {\r\n\t\treturn this._createjs;\r\n\t}\r\n}\r\n\r\nexport interface ICreatejsMovieClipParam extends ICreatejsParam {\r\n\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction createCreatejsMovieClipParams(): ICreatejsMovieClipParam {\r\n\treturn createCreatejsParams();\r\n}\r\n\r\nexport interface IPixiMovieClipData extends IPixiData<PixiMovieClip> {\r\n\tsubInstance: Container;\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction createPixiMovieClipData(cjs: CreatejsMovieClip): IPixiMovieClipData {\r\n\tconst pixi = new PixiMovieClip(cjs);\r\n\t\r\n\treturn Object.assign(createPixiData<PixiMovieClip>(pixi, pixi.pivot), {\r\n\t\tsubInstance: pixi\r\n\t});\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst P = createjs.MovieClip;\r\n\r\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/MovieClip.html | createjs.MovieClip]]\r\n */\r\nexport class CreatejsMovieClip extends createjs.MovieClip implements IExpandedCreatejsDisplayObject {\r\n\tprotected _pixiData: IPixiMovieClipData;\r\n\tprotected _createjsParams: ICreatejsMovieClipParam;\r\n\tprivate _createjsEventManager: EventManager;\r\n\t\r\n\tconstructor(...args: any[]) {\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis._pixiData = createPixiMovieClipData(this);\r\n\t\tthis._createjsParams = createCreatejsMovieClipParams();\r\n\t\tthis._createjsEventManager = new EventManager(this);\r\n\t\t\r\n\t\tP.apply(this, args);\r\n\t}\r\n\t\r\n\tinitialize(...args: any[]) {\r\n\t\tthis._pixiData = createPixiMovieClipData(this);\r\n\t\tthis._createjsParams = createCreatejsMovieClipParams();\r\n\t\tthis._createjsEventManager = new EventManager(this);\r\n\t\t\r\n\t\treturn super.initialize(...args);\r\n\t}\r\n\t\r\n\tget pixi() {\r\n\t\treturn this._pixiData.instance;\r\n\t}\r\n\t\r\n\tupdateForPixi(e: ITickerData): boolean {\r\n\t\tthis._updateState();\r\n\t\t\r\n\t\treturn updateDisplayObjectChildren(this, e);\r\n\t}\r\n\t\r\n\tget x() {\r\n\t\treturn this._createjsParams.x;\r\n\t}\r\n\t\r\n\tset x(value) {\r\n\t\tthis._pixiData.instance.x = value;\r\n\t\tthis._createjsParams.x = value;\r\n\t}\r\n\t\r\n\tget y() {\r\n\t\treturn this._createjsParams.y;\r\n\t}\r\n\t\r\n\tset y(value) {\r\n\t\tthis._pixiData.instance.y = value;\r\n\t\tthis._createjsParams.y = value;\r\n\t}\r\n\t\r\n\tget scaleX() {\r\n\t\treturn this._createjsParams.scaleX;\r\n\t}\r\n\t\t\r\n\tset scaleX(value) {\r\n\t\tthis._pixiData.instance.scale.x = value;\r\n\t\tthis._createjsParams.scaleX = value;\r\n\t}\r\n\t\r\n\tget scaleY() {\r\n\t\treturn this._createjsParams.scaleY;\r\n\t}\r\n\t\r\n\tset scaleY(value) {\r\n\t\tthis._pixiData.instance.scale.y = value;\r\n\t\tthis._createjsParams.scaleY = value;\r\n\t}\r\n\t\r\n\tget skewX() {\r\n\t\treturn this._createjsParams.skewX;\r\n\t}\r\n\t\r\n\tset skewX(value) {\r\n\t\tthis._pixiData.instance.skew.x = -value * DEG_TO_RAD;\r\n\t\tthis._createjsParams.skewX = value;\r\n\t}\r\n\t\r\n\tget skewY() {\r\n\t\treturn this._createjsParams.skewY;\r\n\t}\r\n\t\r\n\tset skewY(value) {\r\n\t\tthis._pixiData.instance.skew.y = value * DEG_TO_RAD;\r\n\t\tthis._createjsParams.skewY = value;\r\n\t}\r\n\t\r\n\tget regX() {\r\n\t\treturn this._createjsParams.regX;\r\n\t}\r\n\t\r\n\tset regX(value) {\r\n\t\tthis._pixiData.regObj.x = value;\r\n\t\tthis._createjsParams.regX = value;\r\n\t}\r\n\t\r\n\tget regY() {\r\n\t\treturn this._createjsParams.regY;\r\n\t}\r\n\t\r\n\tset regY(value) {\r\n\t\tthis._pixiData.regObj.y = value;\r\n\t\tthis._createjsParams.regY = value;\r\n\t}\r\n\t\r\n\tget rotation() {\r\n\t\treturn this._createjsParams.rotation;\r\n\t}\r\n\t\r\n\tset rotation(value) {\r\n\t\tthis._pixiData.instance.rotation = value * DEG_TO_RAD;\r\n\t\tthis._createjsParams.rotation = value;\r\n\t}\r\n\t\r\n\tget visible() {\r\n\t\treturn this._createjsParams.visible;\r\n\t}\r\n\t\r\n\tset visible(value) {\r\n\t\tvalue = !!value;\r\n\t\tthis._pixiData.instance.visible = value;\r\n\t\tthis._createjsParams.visible = value;\r\n\t}\r\n\t\r\n\tget alpha() {\r\n\t\treturn this._createjsParams.alpha;\r\n\t}\r\n\t\r\n\tset alpha(value) {\r\n\t\tthis._pixiData.instance.alpha = value;\r\n\t\tthis._createjsParams.alpha = value;\r\n\t}\r\n\t\r\n\tget _off() {\r\n\t\treturn this._createjsParams._off;\r\n\t}\r\n\t\r\n\tset _off(value) {\r\n\t\tthis._pixiData.instance.renderable = !value;\r\n\t\tthis._createjsParams._off = value;\r\n\t}\r\n\t\r\n\taddEventListener(type: TCreatejsInteractionEvent | string, cb: ICreatejsInteractionEventDelegate | CreatejsButtonHelper, ...args: any[]) {\r\n\t\tif (!(cb instanceof CreatejsButtonHelper)) {\r\n\t\t\tif (type === 'mousedown' || type === 'rollover' || type === 'rollout' || type === 'pressmove' || type === 'pressup') {\r\n\t\t\t\tthis._createjsEventManager.add(this._pixiData.instance, type, cb);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn super.addEventListener(type, cb, ...args);\r\n\t}\r\n\t\r\n\tremoveEventListener(type: TCreatejsInteractionEvent | string, cb: ICreatejsInteractionEventDelegate, ...args: any[]) {\r\n\t\tif (!(cb instanceof CreatejsButtonHelper)) {\r\n\t\t\tif (type === 'mousedown' || type === 'rollover' || type === 'rollout' || type === 'pressmove' || type === 'pressup') {\r\n\t\t\t\tthis._createjsEventManager.remove(this._pixiData.instance, type, cb);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn super.removeEventListener(type, cb, ...args);\r\n\t}\r\n\t\r\n\tget mask() {\r\n\t\treturn this._createjsParams.mask;\r\n\t}\r\n\t\r\n\tset mask(value: TCreatejsMask) {\r\n\t\tif (value) {\r\n\t\t\tvalue.masked.push(this._pixiData.instance);\r\n\t\t\tthis._pixiData.instance.mask = value.pixi;\r\n\t\t\t\r\n\t\t\tthis._pixiData.instance.once('added', () => {\r\n\t\t\t\tthis._pixiData.instance.parent.addChild(value.pixi);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis._pixiData.instance.mask = null;\r\n\t\t}\r\n\t\t\r\n\t\tthis._createjsParams.mask = value;\r\n\t}\r\n\t\r\n\tget filters() {\r\n\t\treturn this._createjsParams.filters;\r\n\t}\r\n\t\r\n\tset filters(value: TCreatejsColorFilters) {\r\n\t\tif (value) {\r\n\t\t\tconst list = [];\r\n\t\t\t\r\n\t\t\tfor (var i = 0; i < value.length; i++) {\r\n\t\t\t\tconst f = value[i];\r\n\t\t\t\t\r\n\t\t\t\tif (f instanceof createjs.ColorMatrixFilter) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconst m = new filters.ColorMatrixFilter();\r\n\t\t\t\tm.matrix = [\r\n\t\t\t\t\tf.redMultiplier, 0, 0, 0, f.redOffset / 255,\r\n\t\t\t\t\t0, f.greenMultiplier, 0, 0, f.greenOffset / 255,\r\n\t\t\t\t\t0, 0, f.blueMultiplier, 0, f.blueOffset / 255,\r\n\t\t\t\t\t0, 0, 0, f.alphaMultiplier, f.alphaOffset / 255,\r\n\t\t\t\t\t0, 0, 0, 0, 1\r\n\t\t\t\t];\r\n\t\t\t\tlist.push(m);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar o = this._pixiData.instance;\r\n\t\t\tvar c = o.children;\r\n\t\t\tvar n = new Container();\r\n\t\t\tvar nc = this._pixiData.subInstance = n.addChild(new Container());\r\n\t\t\t\r\n\t\t\twhile (c.length) {\r\n\t\t\t\tnc.addChild(c[0]);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\to.addChild(n);\r\n\t\t\to.filterContainer = nc;\r\n\t\t\t\r\n\t\t\tnc.updateTransform();\r\n\t\t\tnc.calculateBounds();\r\n\t\t\t\r\n\t\t\tconst b = nc.getLocalBounds();\r\n\t\t\tconst x = b.x;\r\n\t\t\tconst y = b.y;\r\n\t\t\t\r\n\t\t\tfor (var i = 0; i < nc.children.length; i++) {\r\n\t\t\t\tconst child = nc.children[i];\r\n\t\t\t\t\r\n\t\t\t\tchild.x -= x;\r\n\t\t\t\tchild.y -= y;\r\n\t\t\t\t\r\n\t\t\t\tif (child instanceof PixiMovieClip) {\r\n\t\t\t\t\tconst fc = child.filterContainer;\r\n\t\t\t\t\tif (fc) {\r\n\t\t\t\t\t\tfc.cacheAsBitmap = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tn.x = x;\r\n\t\t\tn.y = y;\r\n\t\t\t\r\n\t\t\tnc.filters = list;\r\n\t\t\tnc.cacheAsBitmap = true;\r\n\t\t} else {\r\n\t\t\tconst o = this._pixiData.instance;\r\n\t\t\t\r\n\t\t\tif (o.filterContainer) {\r\n\t\t\t\tconst nc = this._pixiData.subInstance;\r\n\t\t\t\tconst n = nc.parent;\r\n\t\t\t\tconst c = nc.children;\r\n\t\t\t\t\r\n\t\t\t\to.removeChildren();\r\n\t\t\t\to.filterContainer = null;\r\n\t\t\t\twhile (c.length) {\r\n\t\t\t\t\tconst v = o.addChild(c[0]);\r\n\t\t\t\t\tv.x += n.x;\r\n\t\t\t\t\tv.y += n.y;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tnc.filters = [];\r\n\t\t\t\tnc.cacheAsBitmap = false;\r\n\t\t\t\t\r\n\t\t\t\tthis._pixiData.subInstance = o;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tthis._createjsParams.filters = value;\r\n\t}\r\n\t\r\n\taddChild(child: IExpandedCreatejsDisplayObject) {\r\n\t\tthis._pixiData.subInstance.addChild(child.pixi);\r\n\t\t\r\n\t\treturn super.addChild(child);\r\n\t}\r\n\t\r\n\taddChildAt(child: IExpandedCreatejsDisplayObject, index: number) {\r\n\t\tthis._pixiData.subInstance.addChildAt(child.pixi, index);\r\n\t\t\r\n\t\treturn super.addChildAt(child, index);\r\n\t}\r\n\t\r\n\tremoveChild(child: IExpandedCreatejsDisplayObject) {\r\n\t\tthis._pixiData.subInstance.removeChild(child.pixi);\r\n\t\t\r\n\t\treturn super.removeChild(child);\r\n\t}\r\n\t\r\n\tremoveChildAt(index: number) {\r\n\t\tthis._pixiData.subInstance.removeChildAt(index);\r\n\t\t\r\n\t\treturn super.removeChildAt(index);\r\n\t}\r\n\t\r\n\tremoveAllChldren() {\r\n\t\tthis._pixiData.subInstance.removeChildren();\r\n\t\t\r\n\t\treturn super.removeAllChldren();\r\n\t}\r\n}\r\n\r\n// temporary prototype\r\nObject.defineProperties(CreatejsMovieClip.prototype, {\r\n\t_createjsParams: {\r\n\t\tvalue: createCreatejsMovieClipParams(),\r\n\t\twritable: true\r\n\t},\r\n\t_pixiData: {\r\n\t\tvalue: createPixiMovieClipData(createObject<CreatejsMovieClip>(CreatejsMovieClip.prototype)),\r\n\t\twritable: true\r\n\t}\r\n});\r\n\r\n","import { Sprite, Texture, BaseTexture } from 'pixi.js';\r\nimport createjs from '@tawaship/createjs-module';\r\nimport { createPixiData, createCreatejsParams, IPixiData, ICreatejsParam, ITickerData, TCreatejsMask, IExpandedCreatejsDisplayObject } from './core';\r\nimport { createObject, DEG_TO_RAD } from './utils';\r\nimport { EventManager, TCreatejsInteractionEvent, ICreatejsInteractionEventDelegate } from './EventManager';\r\nimport { CreatejsButtonHelper } from './ButtonHelper';\r\nimport { CreatejsShape } from './Shape';\r\n\r\n/**\r\n * [[http://pixijs.download/release/docs/PIXI.Sprite.html | PIXI.Sprite]]\r\n */\r\nexport class PixiSprite extends Sprite {\r\n\tprivate _createjs: CreatejsSprite | {};\r\n\t\r\n\tconstructor(cjs: CreatejsSprite | {}) {\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis._createjs = cjs;\r\n\t}\r\n\t\r\n\tget createjs() {\r\n\t\treturn this._createjs;\r\n\t}\r\n}\r\n\r\nexport interface ICreatejsSpriteParam extends ICreatejsParam {\r\n\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction createCreatejsSpriteParams(): ICreatejsSpriteParam {\r\n\treturn createCreatejsParams();\r\n}\r\n\r\nexport interface IPixiSpriteData extends IPixiData<PixiSprite> {\r\n\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction createPixiSpriteData(cjs: CreatejsSprite | {}): IPixiSpriteData {\r\n\tconst pixi = new PixiSprite(cjs);\r\n\t\r\n\treturn createPixiData<PixiSprite>(pixi, pixi.anchor)\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst P = createjs.Sprite;\r\n\r\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/Sprite.html | createjs.Sprite]]\r\n */\r\nexport class CreatejsSprite extends createjs.Sprite implements IExpandedCreatejsDisplayObject {\r\n\tprotected _pixiData: IPixiSpriteData;\r\n\tprotected _createjsParams: ICreatejsSpriteParam;\r\n\tprivate _createjsEventManager: EventManager;\r\n\t\r\n\tconstructor(...args: any[]) {\r\n\t\tsuper(...args);\r\n\t\t\r\n\t\tthis._pixiData = createPixiSpriteData(this);\r\n\t\tthis._createjsParams = createCreatejsSpriteParams();\r\n\t\tthis._createjsEventManager = new EventManager(this);\r\n\t\t\r\n\t\tP.apply(this, args);\r\n\t}\r\n\t\r\n\tinitialize(...args: any[]) {\r\n\t\tthis._pixiData = createPixiSpriteData(this);\r\n\t\tthis._createjsParams = createCreatejsSpriteParams();\r\n\t\tthis._createjsEventManager = new EventManager(this);\r\n\t\t\r\n\t\treturn super.initialize(...args);\r\n\t}\r\n\t\r\n\tget pixi() {\r\n\t\treturn this._pixiData.instance;\r\n\t}\r\n\t\r\n\tupdateForPixi(e: ITickerData) {\r\n\t\treturn true;\r\n\t}\r\n\t\r\n\tget x() {\r\n\t\treturn this._createjsParams.x;\r\n\t}\r\n\t\r\n\tset x(value) {\r\n\t\tthis._pixiData.instance.x = value;\r\n\t\tthis._createjsParams.x = value;\r\n\t}\r\n\t\r\n\tget y() {\r\n\t\treturn this._createjsParams.y;\r\n\t}\r\n\t\r\n\tset y(value) {\r\n\t\tthis._pixiData.instance.y = value;\r\n\t\tthis._createjsParams.y = value;\r\n\t}\r\n\t\r\n\tget scaleX() {\r\n\t\treturn this._createjsParams.scaleX;\r\n\t}\r\n\t\t\r\n\tset scaleX(value) {\r\n\t\tthis._pixiData.instance.scale.x = value;\r\n\t\tthis._createjsParams.scaleX = value;\r\n\t}\r\n\t\r\n\tget scaleY() {\r\n\t\treturn this._createjsParams.scaleY;\r\n\t}\r\n\t\r\n\tset scaleY(value) {\r\n\t\tthis._pixiData.instance.scale.y = value;\r\n\t\tthis._createjsParams.scaleY = value;\r\n\t}\r\n\t\r\n\tget skewX() {\r\n\t\treturn this._createjsParams.skewX;\r\n\t}\r\n\t\r\n\tset skewX(value) {\r\n\t\tthis._pixiData.instance.skew.x = -value * DEG_TO_RAD;\r\n\t\tthis._createjsParams.skewX = value;\r\n\t}\r\n\t\r\n\tget skewY() {\r\n\t\treturn this._createjsParams.skewY;\r\n\t}\r\n\t\r\n\tset skewY(value) {\r\n\t\tthis._pixiData.instance.skew.y = value * DEG_TO_RAD;\r\n\t\tthis._createjsParams.skewY = value;\r\n\t}\r\n\t\r\n\tget regX() {\r\n\t\treturn this._createjsParams.regX;\r\n\t}\r\n\t\r\n\tset regX(value) {\r\n\t\tthis._pixiData.regObj.x = value;\r\n\t\tthis._createjsParams.regX = value;\r\n\t}\r\n\t\r\n\tget regY() {\r\n\t\treturn this._createjsParams.regY;\r\n\t}\r\n\t\r\n\tset regY(value) {\r\n\t\tthis._pixiData.regObj.y = value;\r\n\t\tthis._createjsParams.regY = value;\r\n\t}\r\n\t\r\n\tget rotation() {\r\n\t\treturn this._createjsParams.rotation;\r\n\t}\r\n\t\r\n\tset rotation(value) {\r\n\t\tthis._pixiData.instance.rotation = value * DEG_TO_RAD;\r\n\t\tthis._createjsParams.rotation = value;\r\n\t}\r\n\t\r\n\tget visible() {\r\n\t\treturn this._createjsParams.visible;\r\n\t}\r\n\t\r\n\tset visible(value) {\r\n\t\tvalue = !!value;\r\n\t\tthis._pixiData.instance.visible = value;\r\n\t\tthis._createjsParams.visible = value;\r\n\t}\r\n\t\r\n\tget alpha() {\r\n\t\treturn this._createjsParams.alpha;\r\n\t}\r\n\t\r\n\tset alpha(value) {\r\n\t\tthis._pixiData.instance.alpha = value;\r\n\t\tthis._createjsParams.alpha = value;\r\n\t}\r\n\t\r\n\tget _off() {\r\n\t\treturn this._createjsParams._off;\r\n\t}\r\n\t\r\n\tset _off(value) {\r\n\t\tthis._pixiData.instance.renderable = !value;\r\n\t\tthis._createjsParams._off = value;\r\n\t}\r\n\t\r\n\taddEventListener(type: TCreatejsInteractionEvent | string, cb: ICreatejsInteractionEventDelegate | CreatejsButtonHelper, ...args: any[]) {\r\n\t\tif (!(cb instanceof CreatejsButtonHelper)) {\r\n\t\t\tif (type === 'mousedown' || type === 'rollover' || type === 'rollout' || type === 'pressmove' || type === 'pressup') {\r\n\t\t\t\tthis._createjsEventManager.add(this._pixiData.instance, type, cb);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn super.addEventListener(type, cb, ...args);\r\n\t}\r\n\t\r\n\tremoveEventListener(type: TCreatejsInteractionEvent | string, cb: ICreatejsInteractionEventDelegate, ...args: any[]) {\r\n\t\tif (!(cb instanceof CreatejsButtonHelper)) {\r\n\t\t\tif (type === 'mousedown' || type === 'rollover' || type === 'rollout' || type === 'pressmove' || type === 'pressup') {\r\n\t\t\t\tthis._createjsEventManager.remove(this._pixiData.instance, type, cb);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn super.removeEventListener(type, cb, ...args);\r\n\t}\r\n\t\r\n\tget mask() {\r\n\t\treturn this._createjsParams.mask;\r\n\t}\r\n\t\r\n\tset mask(value: TCreatejsMask) {\r\n\t\tif (value) {\r\n\t\t\tvalue.masked.push(this._pixiData.instance);\r\n\t\t\tthis._pixiData.instance.mask = value.pixi;\r\n\t\t\t\r\n\t\t\tthis._pixiData.instance.once('added', () => {\r\n\t\t\t\tthis._pixiData.instance.parent.addChild(value.pixi);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis._pixiData.instance.mask = null;\r\n\t\t}\r\n\t\t\r\n\t\tthis._createjsParams.mask = value;\r\n\t}\r\n\t\r\n\tgotoAndStop(...args: any[]) {\r\n\t\tsuper.gotoAndStop(...args);\r\n\t\t\r\n\t\tconst frame = this.spriteSheet.getFrame(this.currentFrame);\r\n\t\tconst baseTexture = BaseTexture.from(frame.image);\r\n\t\tconst texture = new Texture(baseTexture, frame.rect);\r\n\t\t\r\n\t\tthis._pixiData.instance.texture = texture;\r\n\t}\r\n}\r\n\r\n// temporary prototype\r\nObject.defineProperties(CreatejsSprite.prototype, {\r\n\t_createjsParams: {\r\n\t\tvalue: createCreatejsSpriteParams(),\r\n\t\twritable: true\r\n\t},\r\n\t_pixiData: {\r\n\t\tvalue: createPixiSpriteData(createObject<CreatejsSprite>(CreatejsSprite.prototype)),\r\n\t\twritable: true\r\n\t}\r\n});","import { DisplayObject, Container } from 'pixi.js';\r\nimport createjs from '@tawaship/createjs-module';\r\nimport { createPixiData, createCreatejsParams, IPixiData, ICreatejsParam, ITickerData, TCreatejsMask, IExpandedCreatejsDisplayObject } from './core';\r\nimport { CreatejsGraphics } from './Graphics';\r\nimport { createObject, DEG_TO_RAD } from './utils';\r\nimport { EventManager, TCreatejsInteractionEvent, ICreatejsInteractionEventDelegate } from './EventManager';\r\nimport { CreatejsButtonHelper } from './ButtonHelper';\r\n\r\n/**\r\n * [[http://pixijs.download/release/docs/PIXI.Container.html | PIXI.Container]]\r\n */\r\nexport class PixiShape extends Container {\r\n\tprivate _createjs: CreatejsShape;\r\n\t\r\n\tconstructor(cjs: CreatejsShape) {\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis._createjs = cjs;\r\n\t}\r\n\t\r\n\tget createjs() {\r\n\t\treturn this._createjs;\r\n\t}\r\n}\r\n\r\nexport interface ICreatejsShapeParam extends ICreatejsParam {\r\n\tgraphics: CreatejsGraphics | null;\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction createCreatejsShapeParams(graphics: CreatejsGraphics | null): ICreatejsShapeParam {\r\n\treturn Object.assign(createCreatejsParams(), {\r\n\t\tgraphics\r\n\t});\r\n}\r\n\r\nexport interface IPixiShapeData extends IPixiData<PixiShape> {\r\n\t/**\r\n\t * [[http://pixijs.download/release/docs/PIXI.DisplayObject.html | PIXI.DisplayObject]]\r\n\t */\r\n\tmasked: DisplayObject[];\r\n};\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction createPixiShapeData(cjs: CreatejsShape): IPixiShapeData {\r\n\tconst pixi = new PixiShape(cjs);\r\n\t\r\n\treturn Object.assign(createPixiData<PixiShape>(pixi, pixi.pivot), {\r\n\t\tmasked: []\r\n\t});\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst P = createjs.Shape;\r\n\r\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/Shape.html | createjs.Shape]]\r\n */\r\nexport class CreatejsShape extends createjs.Shape implements IExpandedCreatejsDisplayObject {\r\n\tprotected _pixiData: IPixiShapeData;\r\n\tprotected _createjsParams: ICreatejsShapeParam;\r\n\tprivate _createjsEventManager: EventManager;\r\n\t\r\n\tconstructor(...args: any[]) {\r\n\t\tsuper(...args);\r\n\t\t\r\n\t\tthis._pixiData = createPixiShapeData(this);\r\n\t\tthis._createjsParams = createCreatejsShapeParams(null);\r\n\t\tthis._createjsEventManager = new EventManager(this);\r\n\t\t\r\n\t\tP.apply(this, args);\r\n\t}\r\n\t\r\n\tinitialize(...args: any[]) {\r\n\t\tthis._pixiData = createPixiShapeData(this);\r\n\t\tthis._createjsParams = createCreatejsShapeParams(null);\r\n\t\tthis._createjsEventManager = new EventManager(this);\r\n\t\t\r\n\t\treturn super.initialize(...args);\r\n\t}\r\n\t\r\n\tget pixi() {\r\n\t\treturn this._pixiData.instance;\r\n\t}\r\n\t\r\n\tupdateForPixi(e: ITickerData) {\r\n\t\treturn true;\r\n\t}\r\n\t\r\n\tget x() {\r\n\t\treturn this._createjsParams.x;\r\n\t}\r\n\t\r\n\tset x(value) {\r\n\t\tthis._pixiData.instance.x = value;\r\n\t\tthis._createjsParams.x = value;\r\n\t}\r\n\t\r\n\tget y() {\r\n\t\treturn this._createjsParams.y;\r\n\t}\r\n\t\r\n\tset y(value) {\r\n\t\tthis._pixiData.instance.y = value;\r\n\t\tthis._createjsParams.y = value;\r\n\t}\r\n\t\r\n\tget scaleX() {\r\n\t\treturn this._createjsParams.scaleX;\r\n\t}\r\n\t\t\r\n\tset scaleX(value) {\r\n\t\tthis._pixiData.instance.scale.x = value;\r\n\t\tthis._createjsParams.scaleX = value;\r\n\t}\r\n\t\r\n\tget scaleY() {\r\n\t\treturn this._createjsParams.scaleY;\r\n\t}\r\n\t\r\n\tset scaleY(value) {\r\n\t\tthis._pixiData.instance.scale.y = value;\r\n\t\tthis._createjsParams.scaleY = value;\r\n\t}\r\n\t\r\n\tget skewX() {\r\n\t\treturn this._createjsParams.skewX;\r\n\t}\r\n\t\r\n\tset skewX(value) {\r\n\t\tthis._pixiData.instance.skew.x = -value * DEG_TO_RAD;\r\n\t\tthis._createjsParams.skewX = value;\r\n\t}\r\n\t\r\n\tget skewY() {\r\n\t\treturn this._createjsParams.skewY;\r\n\t}\r\n\t\r\n\tset skewY(value) {\r\n\t\tthis._pixiData.instance.skew.y = value * DEG_TO_RAD;\r\n\t\tthis._createjsParams.skewY = value;\r\n\t}\r\n\t\r\n\tget regX() {\r\n\t\treturn this._createjsParams.regX;\r\n\t}\r\n\t\r\n\tset regX(value) {\r\n\t\tthis._pixiData.regObj.x = value;\r\n\t\tthis._createjsParams.regX = value;\r\n\t}\r\n\t\r\n\tget regY() {\r\n\t\treturn this._createjsParams.regY;\r\n\t}\r\n\t\r\n\tset regY(value) {\r\n\t\tthis._pixiData.regObj.y = value;\r\n\t\tthis._createjsParams.regY = value;\r\n\t}\r\n\t\r\n\tget rotation() {\r\n\t\treturn this._createjsParams.rotation;\r\n\t}\r\n\t\r\n\tset rotation(value) {\r\n\t\tthis._pixiData.instance.rotation = value * DEG_TO_RAD;\r\n\t\tthis._createjsParams.rotation = value;\r\n\t}\r\n\t\r\n\tget visible() {\r\n\t\treturn this._createjsParams.visible;\r\n\t}\r\n\t\r\n\tset visible(value) {\r\n\t\tvalue = !!value;\r\n\t\tthis._pixiData.instance.visible = value;\r\n\t\tthis._createjsParams.visible = value;\r\n\t}\r\n\t\r\n\tget alpha() {\r\n\t\treturn this._createjsParams.alpha;\r\n\t}\r\n\t\r\n\tset alpha(value) {\r\n\t\tthis._pixiData.instance.alpha = value;\r\n\t\tthis._createjsParams.alpha = value;\r\n\t}\r\n\t\r\n\tget _off() {\r\n\t\treturn this._createjsParams._off;\r\n\t}\r\n\t\r\n\tset _off(value) {\r\n\t\tthis._pixiData.instance.renderable = !value;\r\n\t\tthis._createjsParams._off = value;\r\n\t}\r\n\t\r\n\taddEventListener(type: TCreatejsInteractionEvent | string, cb: ICreatejsInteractionEventDelegate | CreatejsButtonHelper, ...args: any[]) {\r\n\t\tif (!(cb instanceof CreatejsButtonHelper)) {\r\n\t\t\tif (type === 'mousedown' || type === 'rollover' || type === 'rollout' || type === 'pressmove' || type === 'pressup') {\r\n\t\t\t\tthis._createjsEventManager.add(this._pixiData.instance, type, cb);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn super.addEventListener(type, cb, ...args);\r\n\t}\r\n\t\r\n\tremoveEventListener(type: TCreatejsInteractionEvent | string, cb: ICreatejsInteractionEventDelegate, ...args: any[]) {\r\n\t\tif (!(cb instanceof CreatejsButtonHelper)) {\r\n\t\t\tif (type === 'mousedown' || type === 'rollover' || type === 'rollout' || type === 'pressmove' || type === 'pressup') {\r\n\t\t\t\tthis._createjsEventManager.remove(this._pixiData.instance, type, cb);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn super.removeEventListener(type, cb, ...args);\r\n\t}\r\n\t\r\n\tget mask() {\r\n\t\treturn this._createjsParams.mask;\r\n\t}\r\n\t\r\n\tset mask(value: TCreatejsMask) {\r\n\t\tif (value) {\r\n\t\t\tvalue.masked.push(this._pixiData.instance);\r\n\t\t\tthis._pixiData.instance.mask = value.pixi;\r\n\t\t\t\r\n\t\t\tthis._pixiData.instance.once('added', () => {\r\n\t\t\t\tthis._pixiData.instance.parent.addChild(value.pixi);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis._pixiData.instance.mask = null;\r\n\t\t}\r\n\t\t\r\n\t\tthis._createjsParams.mask = value;\r\n\t}\r\n\t\r\n\tget graphics() {\r\n\t\treturn this._createjsParams.graphics;\r\n\t}\r\n\t\r\n\tset graphics(value) {\r\n\t\tif (this._pixiData.masked.length) {\r\n\t\t\tthis._pixiData.instance.removeChildren();\r\n\t\t\t\r\n\t\t\tif (value) {\r\n\t\t\t\tfor (let i = 0; i < this._pixiData.masked.length; i++) {\r\n\t\t\t\t\tthis._pixiData.masked[i].mask = this._pixiData.instance;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tfor (let i = 0; i < this._pixiData.masked.length; i++) {\r\n\t\t\t\t\tthis._pixiData.masked[i].mask = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif (value) {\r\n\t\t\tthis._pixiData.instance.addChild(value.pixi);\r\n\t\t}\r\n\t\t\r\n\t\tthis._createjsParams.graphics = value;\r\n\t}\r\n\t\r\n\tget masked() {\r\n\t\treturn this._pixiData.masked;\r\n\t}\r\n}\r\n\r\n// temporary prototype\r\nObject.defineProperties(CreatejsShape.prototype, {\r\n\t_createjsParams: {\r\n\t\tvalue: createCreatejsShapeParams(null),\r\n\t\twritable: true\r\n\t},\r\n\t_pixiData: {\r\n\t\tvalue: createPixiShapeData(createObject<CreatejsShape>(CreatejsShape.prototype)),\r\n\t\twritable: true\r\n\t}\r\n});","import { Sprite, Texture } from 'pixi.js';\r\nimport createjs from '@tawaship/createjs-module';\r\nimport { createPixiData, createCreatejsParams, IPixiData, ICreatejsParam, ITickerData, TCreatejsMask, IExpandedCreatejsDisplayObject } from './core';\r\nimport { createObject, DEG_TO_RAD } from './utils';\r\nimport { EventManager, TCreatejsInteractionEvent, ICreatejsInteractionEventDelegate } from './EventManager';\r\nimport { CreatejsButtonHelper } from './ButtonHelper';\r\nimport { CreatejsShape } from './Shape';\r\n\r\n/**\r\n * [[http://pixijs.download/release/docs/PIXI.Sprite.html | PIXI.Sprite]]\r\n */\r\nexport class PixiBitmap extends Sprite {\r\n\tprivate _createjs: CreatejsBitmap;\r\n\t\r\n\tconstructor(cjs: CreatejsBitmap) {\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis._createjs = cjs;\r\n\t}\r\n\t\r\n\tget createjs() {\r\n\t\treturn this._createjs;\r\n\t}\r\n}\r\n\r\nexport interface ICreatejsBitmapParam extends ICreatejsParam {\r\n\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction createCreatejsBitmapParams(): ICreatejsBitmapParam {\r\n\treturn createCreatejsParams();\r\n}\r\n\r\nexport interface IPixiBitmapData extends IPixiData<PixiBitmap> {\r\n\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction createPixiBitmapData(cjs: CreatejsBitmap): IPixiBitmapData {\r\n\tconst pixi = new PixiBitmap(cjs);\r\n\t\r\n\treturn createPixiData<PixiBitmap>(pixi, pixi.anchor);\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst P = createjs.Bitmap;\r\n\r\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/Bitmap.html | createjs.Bitmap]]\r\n */\r\nexport class CreatejsBitmap extends createjs.Bitmap implements IExpandedCreatejsDisplayObject {\r\n\tprotected _pixiData: IPixiBitmapData;\r\n\tprotected _createjsParams: ICreatejsBitmapParam;\r\n\tprivate _createjsEventManager: EventManager;\r\n\t\r\n\tconstructor(...args: any[]) {\r\n\t\tsuper(...args);\r\n\t\t\r\n\t\tthis._pixiData = createPixiBitmapData(this);\r\n\t\tthis._createjsParams = createCreatejsBitmapParams();\r\n\t\tthis._createjsEventManager = new EventManager(this);\r\n\t\t\r\n\t\tP.apply(this, args);\r\n\t}\r\n\t\r\n\tinitialize(...args: any[]) {\r\n\t\tthis._pixiData = createPixiBitmapData(this);\r\n\t\tthis._createjsParams = createCreatejsBitmapParams();\r\n\t\tthis._createjsEventManager = new EventManager(this);\r\n\t\t\r\n\t\tconst res = super.initialize(...args);\r\n\t\tconst texture = Texture.from(this.image);\r\n\t\tthis._pixiData.instance.texture = texture;\r\n\t\t\r\n\t\treturn res;\r\n\t}\r\n\t\r\n\tget pixi() {\r\n\t\treturn this._pixiData.instance;\r\n\t}\r\n\t\r\n\tupdateForPixi(e: ITickerData) {\r\n\t\treturn true;\r\n\t}\r\n\t\r\n\tget x() {\r\n\t\treturn this._createjsParams.x;\r\n\t}\r\n\t\r\n\tset x(value) {\r\n\t\tthis._pixiData.instance.x = value;\r\n\t\tthis._createjsParams.x = value;\r\n\t}\r\n\t\r\n\tget y() {\r\n\t\treturn this._createjsParams.y;\r\n\t}\r\n\t\r\n\tset y(value) {\r\n\t\tthis._pixiData.instance.y = value;\r\n\t\tthis._createjsParams.y = value;\r\n\t}\r\n\t\r\n\tget scaleX() {\r\n\t\treturn this._createjsParams.scaleX;\r\n\t}\r\n\t\t\r\n\tset scaleX(value) {\r\n\t\tthis._pixiData.instance.scale.x = value;\r\n\t\tthis._createjsParams.scaleX = value;\r\n\t}\r\n\t\r\n\tget scaleY() {\r\n\t\treturn this._createjsParams.scaleY;\r\n\t}\r\n\t\r\n\tset scaleY(value) {\r\n\t\tthis._pixiData.instance.scale.y = value;\r\n\t\tthis._createjsParams.scaleY = value;\r\n\t}\r\n\t\r\n\tget skewX() {\r\n\t\treturn this._createjsParams.skewX;\r\n\t}\r\n\t\r\n\tset skewX(value) {\r\n\t\tthis._pixiData.instance.skew.x = -value * DEG_TO_RAD;\r\n\t\tthis._createjsParams.skewX = value;\r\n\t}\r\n\t\r\n\tget skewY() {\r\n\t\treturn this._createjsParams.skewY;\r\n\t}\r\n\t\r\n\tset skewY(value) {\r\n\t\tthis._pixiData.instance.skew.y = value * DEG_TO_RAD;\r\n\t\tthis._createjsParams.skewY = value;\r\n\t}\r\n\t\r\n\tget regX() {\r\n\t\treturn this._createjsParams.regX;\r\n\t}\r\n\t\r\n\tset regX(value) {\r\n\t\tthis._pixiData.regObj.x = value;\r\n\t\tthis._createjsParams.regX = value;\r\n\t}\r\n\t\r\n\tget regY() {\r\n\t\treturn this._createjsParams.regY;\r\n\t}\r\n\t\r\n\tset regY(value) {\r\n\t\tthis._pixiData.regObj.y = value;\r\n\t\tthis._createjsParams.regY = value;\r\n\t}\r\n\t\r\n\tget rotation() {\r\n\t\treturn this._createjsParams.rotation;\r\n\t}\r\n\t\r\n\tset rotation(value) {\r\n\t\tthis._pixiData.instance.rotation = value * DEG_TO_RAD;\r\n\t\tthis._createjsParams.rotation = value;\r\n\t}\r\n\t\r\n\tget visible() {\r\n\t\treturn this._createjsParams.visible;\r\n\t}\r\n\t\r\n\tset visible(value) {\r\n\t\tvalue = !!value;\r\n\t\tthis._pixiData.instance.visible = value;\r\n\t\tthis._createjsParams.visible = value;\r\n\t}\r\n\t\r\n\tget alpha() {\r\n\t\treturn this._createjsParams.alpha;\r\n\t}\r\n\t\r\n\tset alpha(value) {\r\n\t\tthis._pixiData.instance.alpha = value;\r\n\t\tthis._createjsParams.alpha = value;\r\n\t}\r\n\t\r\n\tget _off() {\r\n\t\treturn this._createjsParams._off;\r\n\t}\r\n\t\r\n\tset _off(value) {\r\n\t\tthis._pixiData.instance.renderable = !value;\r\n\t\tthis._createjsParams._off = value;\r\n\t}\r\n\t\r\n\taddEventListener(type: TCreatejsInteractionEvent | string, cb: ICreatejsInteractionEventDelegate | CreatejsButtonHelper, ...args: any[]) {\r\n\t\tif (!(cb instanceof CreatejsButtonHelper)) {\r\n\t\t\tif (type === 'mousedown' || type === 'rollover' || type === 'rollout' || type === 'pressmove' || type === 'pressup') {\r\n\t\t\t\tthis._createjsEventManager.add(this._pixiData.instance, type, cb);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn super.addEventListener(type, cb, ...args);\r\n\t}\r\n\t\r\n\tremoveEventListener(type: TCreatejsInteractionEvent | string, cb: ICreatejsInteractionEventDelegate, ...args: any[]) {\r\n\t\tif (!(cb instanceof CreatejsButtonHelper)) {\r\n\t\t\tif (type === 'mousedown' || type === 'rollover' || type === 'rollout' || type === 'pressmove' || type === 'pressup') {\r\n\t\t\t\tthis._createjsEventManager.remove(this._pixiData.instance, type, cb);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn super.removeEventListener(type, cb, ...args);\r\n\t}\r\n\t\r\n\tget mask() {\r\n\t\treturn this._createjsParams.mask;\r\n\t}\r\n\t\r\n\tset mask(value: TCreatejsMask) {\r\n\t\tif (value) {\r\n\t\t\tvalue.masked.push(this._pixiData.instance);\r\n\t\t\tthis._pixiData.instance.mask = value.pixi;\r\n\t\t\t\r\n\t\t\tthis._pixiData.instance.once('added', () => {\r\n\t\t\t\tthis._pixiData.instance.parent.addChild(value.pixi);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis._pixiData.instance.mask = null;\r\n\t\t}\r\n\t\t\r\n\t\tthis._createjsParams.mask = value;\r\n\t}\r\n}\r\n\r\n// temporary prototype\r\nObject.defineProperties(CreatejsBitmap.prototype, {\r\n\t_createjsParams: {\r\n\t\tvalue: createCreatejsBitmapParams(),\r\n\t\twritable: true\r\n\t},\r\n\t_pixiData: {\r\n\t\tvalue: createPixiBitmapData(createObject<CreatejsBitmap>(CreatejsBitmap.prototype)),\r\n\t\twritable: true\r\n\t}\r\n});","import { Graphics, LINE_CAP, LINE_JOIN} from 'pixi.js';\r\nimport createjs from '@tawaship/createjs-module';\r\nimport { createPixiData, createCreatejsParams, IPixiData, ICreatejsParam,  ITickerData, TCreatejsMask, IExpandedCreatejsDisplayObject } from './core';\r\nimport { createObject, DEG_TO_RAD } from './utils';\r\nimport { EventManager, TCreatejsInteractionEvent, ICreatejsInteractionEventDelegate } from './EventManager';\r\nimport { CreatejsButtonHelper } from './ButtonHelper';\r\nimport { CreatejsShape } from './Shape';\r\n\r\n/**\r\n * [[http://pixijs.download/release/docs/PIXI.Graphics.html | PIXI.Graphics]]\r\n */\r\nexport class PixiGraphics extends Graphics {\r\n\tprivate _createjs: CreatejsGraphics;\r\n\t\r\n\tconstructor(cjs: CreatejsGraphics) {\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis._createjs = cjs;\r\n\t}\r\n\t\r\n\tget createjs() {\r\n\t\treturn this._createjs;\r\n\t}\r\n}\r\n\r\nexport interface ICreatejsGraphicsParam extends ICreatejsParam {\r\n\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction createCreatejsGraphicsParams(): ICreatejsGraphicsParam {\r\n\treturn createCreatejsParams();\r\n}\r\n\r\nexport interface IPixiGraphicsData extends IPixiData<PixiGraphics> {\r\n\tstrokeFill: number;\r\n\tstrokeAlpha: number;\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction createPixiGraphicsData(cjs: CreatejsGraphics): IPixiGraphicsData {\r\n\tconst pixi = new PixiGraphics(cjs);\r\n\t\r\n\treturn Object.assign(createPixiData<PixiGraphics>(pixi, pixi.pivot), {\r\n\t\tstrokeFill: 0,\r\n\t\tstrokeAlpha: 1\r\n\t});\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst COLOR_RED = 16 * 16 * 16 * 16;\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst COLOR_GREEN = 16 * 16;\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst LineCap = {\r\n\t0: LINE_CAP.BUTT,\r\n\t1: LINE_CAP.ROUND,\r\n\t2: LINE_CAP.SQUARE\r\n};\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst LineJoin = {\r\n\t0: LINE_JOIN.MITER,\r\n\t1: LINE_JOIN.ROUND,\r\n\t2: LINE_JOIN.BEVEL\r\n};\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst P = createjs.Graphics;\r\n\r\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/Graphics.html | createjs.Graphics]]\r\n */\r\nexport class CreatejsGraphics extends createjs.Graphics implements IExpandedCreatejsDisplayObject {\r\n\tprotected _pixiData: IPixiGraphicsData;\r\n\tprotected _createjsParams: ICreatejsGraphicsParam;\r\n\tprivate _createjsEventManager: EventManager;\r\n\t\r\n\tconstructor(...args: any[]) {\r\n\t\tsuper(...args);\r\n\t\t\r\n\t\tthis._pixiData = createPixiGraphicsData(this);\r\n\t\tthis._createjsParams = createCreatejsGraphicsParams();\r\n\t\tthis._createjsEventManager = new EventManager(this);\r\n\t\t\r\n\t\tP.apply(this, args);\r\n\t\t\r\n\t\tthis._pixiData.instance.beginFill(0xFFEEEE, 1);\r\n\t\tthis._pixiData.strokeFill = 0;\r\n\t\tthis._pixiData.strokeAlpha = 1;\r\n\t}\r\n\t\r\n\tinitialize(...args: any[]) {\r\n\t\tthis._pixiData = createPixiGraphicsData(this);\r\n\t\tthis._createjsParams = createCreatejsGraphicsParams();\r\n\t\tthis._createjsEventManager = new EventManager(this);\r\n\t\t\r\n\t\treturn super.initialize(...args);\r\n\t}\r\n\t\r\n\tget pixi() {\r\n\t\treturn this._pixiData.instance;\r\n\t}\r\n\t\r\n\tupdateForPixi(e: ITickerData) {\r\n\t\treturn true;\r\n\t}\r\n\t\r\n\tget x() {\r\n\t\treturn this._createjsParams.x;\r\n\t}\r\n\t\r\n\tset x(value) {\r\n\t\tthis._pixiData.instance.x = value;\r\n\t\tthis._createjsParams.x = value;\r\n\t}\r\n\t\r\n\tget y() {\r\n\t\treturn this._createjsParams.y;\r\n\t}\r\n\t\r\n\tset y(value) {\r\n\t\tthis._pixiData.instance.y = value;\r\n\t\tthis._createjsParams.y = value;\r\n\t}\r\n\t\r\n\tget scaleX() {\r\n\t\treturn this._createjsParams.scaleX;\r\n\t}\r\n\t\t\r\n\tset scaleX(value) {\r\n\t\tthis._pixiData.instance.scale.x = value;\r\n\t\tthis._createjsParams.scaleX = value;\r\n\t}\r\n\t\r\n\tget scaleY() {\r\n\t\treturn this._createjsParams.scaleY;\r\n\t}\r\n\t\r\n\tset scaleY(value) {\r\n\t\tthis._pixiData.instance.scale.y = value;\r\n\t\tthis._createjsParams.scaleY = value;\r\n\t}\r\n\t\r\n\tget skewX() {\r\n\t\treturn this._createjsParams.skewX;\r\n\t}\r\n\t\r\n\tset skewX(value) {\r\n\t\tthis._pixiData.instance.skew.x = -value * DEG_TO_RAD;\r\n\t\tthis._createjsParams.skewX = value;\r\n\t}\r\n\t\r\n\tget skewY() {\r\n\t\treturn this._createjsParams.skewY;\r\n\t}\r\n\t\r\n\tset skewY(value) {\r\n\t\tthis._pixiData.instance.skew.y = value * DEG_TO_RAD;\r\n\t\tthis._createjsParams.skewY = value;\r\n\t}\r\n\t\r\n\tget regX() {\r\n\t\treturn this._createjsParams.regX;\r\n\t}\r\n\t\r\n\tset regX(value) {\r\n\t\tthis._pixiData.regObj.x = value;\r\n\t\tthis._createjsParams.regX = value;\r\n\t}\r\n\t\r\n\tget regY() {\r\n\t\treturn this._createjsParams.regY;\r\n\t}\r\n\t\r\n\tset regY(value) {\r\n\t\tthis._pixiData.regObj.y = value;\r\n\t\tthis._createjsParams.regY = value;\r\n\t}\r\n\t\r\n\tget rotation() {\r\n\t\treturn this._createjsParams.rotation;\r\n\t}\r\n\t\r\n\tset rotation(value) {\r\n\t\tthis._pixiData.instance.rotation = value * DEG_TO_RAD;\r\n\t\tthis._createjsParams.rotation = value;\r\n\t}\r\n\t\r\n\tget visible() {\r\n\t\treturn this._createjsParams.visible;\r\n\t}\r\n\t\r\n\tset visible(value) {\r\n\t\tvalue = !!value;\r\n\t\tthis._pixiData.instance.visible = value;\r\n\t\tthis._createjsParams.visible = value;\r\n\t}\r\n\t\r\n\tget alpha() {\r\n\t\treturn this._createjsParams.alpha;\r\n\t}\r\n\t\r\n\tset alpha(value) {\r\n\t\tthis._pixiData.instance.alpha = value;\r\n\t\tthis._createjsParams.alpha = value;\r\n\t}\r\n\t\r\n\tget _off() {\r\n\t\treturn this._createjsParams._off;\r\n\t}\r\n\t\r\n\tset _off(value) {\r\n\t\tthis._pixiData.instance.renderable = !value;\r\n\t\tthis._createjsParams._off = value;\r\n\t}\r\n\t\r\n\taddEventListener(type: TCreatejsInteractionEvent | string, cb: ICreatejsInteractionEventDelegate | CreatejsButtonHelper, ...args: any[]) {\r\n\t\tif (!(cb instanceof CreatejsButtonHelper)) {\r\n\t\t\tif (type === 'mousedown' || type === 'rollover' || type === 'rollout' || type === 'pressmove' || type === 'pressup') {\r\n\t\t\t\tthis._createjsEventManager.add(this._pixiData.instance, type, cb);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn super.addEventListener(type, cb, ...args);\r\n\t}\r\n\t\r\n\tremoveEventListener(type: TCreatejsInteractionEvent | string, cb: ICreatejsInteractionEventDelegate, ...args: any[]) {\r\n\t\tif (!(cb instanceof CreatejsButtonHelper)) {\r\n\t\t\tif (type === 'mousedown' || type === 'rollover' || type === 'rollout' || type === 'pressmove' || type === 'pressup') {\r\n\t\t\t\tthis._createjsEventManager.remove(this._pixiData.instance, type, cb);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn super.removeEventListener(type, cb, ...args);\r\n\t}\r\n\t\r\n\tget mask() {\r\n\t\treturn this._createjsParams.mask;\r\n\t}\r\n\t\r\n\tset mask(value: TCreatejsMask) {\r\n\t\tif (value) {\r\n\t\t\tvalue.masked.push(this._pixiData.instance);\r\n\t\t\tthis._pixiData.instance.mask = value.pixi;\r\n\t\t\t\r\n\t\t\tthis._pixiData.instance.once('added', () => {\r\n\t\t\t\tthis._pixiData.instance.parent.addChild(value.pixi);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis._pixiData.instance.mask = null;\r\n\t\t}\r\n\t\t\r\n\t\tthis._createjsParams.mask = value;\r\n\t}\r\n\t\r\n\t// path methods\r\n\t\r\n\tmoveTo(x: number, y: number) {\r\n\t\tif (this._pixiData.instance.clone().endFill().containsPoint({x: x, y: y})) {\r\n\t\t\tthis._pixiData.instance.beginHole();\r\n\t\t} else {\r\n\t\t\tthis._pixiData.instance.endHole();\r\n\t\t}\r\n\t\t\r\n\t\tthis._pixiData.instance.moveTo(x, y);\r\n\t\t\r\n\t\treturn super.moveTo(x, y);\r\n\t}\r\n\t\r\n\tmt(x: number, y: number) {\r\n\t\treturn this.moveTo(x, y);\r\n\t}\r\n\t\r\n\tlineTo(x: number, y: number) {\r\n\t\tthis._pixiData.instance.lineTo(x, y);\r\n\t\t\r\n\t\treturn super.lineTo(x, y);\r\n\t}\r\n\t\r\n\tlt(x: number, y: number) {\r\n\t\treturn this.lineTo(x, y);\r\n\t}\r\n\t\r\n\tarcTo(x1: number, y1: number, x2: number, y2: number, radius: number) {\r\n\t\tthis._pixiData.instance.arcTo(x1, y1, x2, y2, radius);\r\n\t\t\r\n\t\treturn super.arcTo(x1, y1, x2, y2, radius);\r\n\t}\r\n\t\r\n\tat(x1: number, y1: number, x2: number, y2: number, radius: number) {\r\n\t\treturn this.arcTo(x1, y1, x2, y2, radius);\r\n\t}\r\n\t\r\n\tarc(x: number, y: number, radius: number, startAngle: number, endAngle: number, anticlockwise: boolean) {\r\n\t\tthis._pixiData.instance.arc(x, y, radius, startAngle, endAngle, anticlockwise);\r\n\t\t\r\n\t\treturn super.arc(x, y, radius, startAngle, endAngle, anticlockwise);\r\n\t}\r\n\t\r\n\ta(x: number, y: number, radius: number, startAngle: number, endAngle: number, anticlockwise: boolean) {\r\n\t\treturn this.arc(x, y, radius, startAngle, endAngle, anticlockwise);\r\n\t}\r\n\t\r\n\tquadraticCurveTo(cpx: number, cpy: number, x: number, y: number) {\r\n\t\tthis._pixiData.instance.quadraticCurveTo(cpx, cpy, x, y);\r\n\t\t\r\n\t\treturn super.quadraticCurveTo(cpx, cpy, x, y);\r\n\t}\r\n\t\r\n\tqt(cpx: number, cpy: number, x: number, y: number) {\r\n\t\treturn this.quadraticCurveTo(cpx, cpy, x, y);\r\n\t}\r\n\t\r\n\tcurveTo(cpx: number, cpy: number, x: number, y: number) {\r\n\t\treturn this.quadraticCurveTo(cpx, cpy, x, y);\r\n\t}\r\n\t\r\n\tbezierCurveTo(cp1x: number, cp1y: number, cp2x: number, cp2y: number, x: number, y: number) {\r\n\t\tthis._pixiData.instance.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\r\n\t\t\r\n\t\treturn super.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\r\n\t}\r\n\t\r\n\tbt(cp1x: number, cp1y: number, cp2x: number, cp2y: number, x: number, y: number) {\r\n\t\treturn this.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\r\n\t}\r\n\t\r\n\trect(x: number, y: number, w: number, h: number) {\r\n\t\tthis._pixiData.instance.drawRect(x, y, w, h);\r\n\t\t\r\n\t\treturn super.rect(x, y, w, h);\r\n\t}\r\n\t\r\n\tr(x: number, y: number, w: number, h: number) {\r\n\t\treturn this.rect(x, y, w, h);\r\n\t}\r\n\t\r\n\tdrawRect(x: number, y: number, w: number, h: number) {\r\n\t\treturn this.rect(x, y, w, h);\r\n\t}\r\n\t\r\n\tdr(x: number, y: number, w: number, h: number) {\r\n\t\treturn this.rect(x, y, w, h);\r\n\t}\r\n\t\r\n\tclosePath() {\r\n\t\tthis._pixiData.instance.closePath();\r\n\t\t\r\n\t\treturn super.closePath();\r\n\t}\r\n\t\r\n\tcp() {\r\n\t\treturn this.closePath();\r\n\t}\r\n\t\r\n\tclear() {\r\n\t\tthis._pixiData.instance.clear();\r\n\t\t\r\n\t\treturn super.clear();\r\n\t}\r\n\t\r\n\tc() {\r\n\t\treturn this.clear();\r\n\t}\r\n\t\r\n\tprivate _parseColor(color: string) {\r\n\t\tconst res = {\r\n\t\t\tcolor: 0,\r\n\t\t\talpha: 1\r\n\t\t};\r\n\t\t\r\n\t\tif (!color) {\r\n\t\t\tres.alpha = 0;\r\n\t\t\treturn res;\r\n\t\t}\r\n\t\t\r\n\t\tif (color.charAt(0) === '#') {\r\n\t\t\tres.color = parseInt(color.slice(1), 16);\r\n\t\t\treturn res;\r\n\t\t}\r\n\t\t\r\n\t\tconst colors = color.replace(/rgba|\\(|\\)|\\s/g, '').split(',');\r\n\t\t\r\n\t\tres.color = Number(colors[0]) * COLOR_RED + Number(colors[1]) * COLOR_GREEN + Number(colors[2]);\r\n\t\tres.alpha = Number(colors[3]);\r\n\t\t\r\n\t\treturn res;\r\n\t}\r\n\t\r\n\tbeginFill(color: string) {\r\n\t\tconst c = this._parseColor(color);\r\n\t\tthis._pixiData.instance.beginFill(c.color, c.alpha);\r\n\t\t\r\n\t\treturn super.beginFill(color);\r\n\t}\r\n\t\r\n\tf(color: string) {\r\n\t\treturn this.beginFill(color);\r\n\t}\r\n\t\r\n\tendFill() {\r\n\t\tthis._pixiData.instance.endFill();\r\n\t\t\r\n\t\treturn super.endFill();\r\n\t}\r\n\t\r\n\tef() {\r\n\t\treturn this.endFill();\r\n\t}\r\n\t\r\n\tsetStrokeStyle(thickness: number, caps: 0 | 1 | 2, joints: 0 | 1 | 2, miterLimit: number, ignoreScale: boolean) {\r\n\t\tthis._pixiData.instance.lineTextureStyle({\r\n\t\t\twidth: thickness,\r\n\t\t\tcolor: this._pixiData.strokeFill,\r\n\t\t\talpha: this._pixiData.strokeAlpha,\r\n\t\t\tcap: (caps in LineCap) ? LineCap[caps] : LineCap[0],\r\n\t\t\tjoin: (joints in LineJoin) ? LineJoin[joints] : LineJoin[0],\r\n\t\t\tmiterLimit\r\n\t\t});\r\n\t\t\r\n\t\treturn super.setStrokeStyle(thickness, caps, joints, miterLimit, ignoreScale);\r\n\t}\r\n\t\r\n\tss(thickness: number, caps: 0 | 1 | 2, joints: 0 | 1 | 2, miterLimit: number, ignoreScale: boolean) {\r\n\t\treturn this.setStrokeStyle(thickness, caps, joints, miterLimit, ignoreScale);\r\n\t}\r\n\t\r\n\tbeginStroke(color: string) {\r\n\t\tconst c = this._parseColor(color);\r\n\t\tthis._pixiData.strokeFill = c.color;\r\n\t\tthis._pixiData.strokeAlpha = c.alpha;\r\n\t\t\r\n\t\treturn super.beginStroke(color);\r\n\t}\r\n\t\r\n\ts(color: string) {\r\n\t\treturn this.beginStroke(color);\r\n\t}\r\n\t\r\n\tdrawRoundRect(x: number, y: number, w: number, h: number, radius: number) {\r\n\t\tthis._pixiData.instance.drawRoundedRect(x, y, w, h, radius);\r\n\t\t\r\n\t\treturn super.drawRoundRect(x, y, w, h, radius);\r\n\t}\r\n\t\r\n\trr(x: number, y: number, w: number, h: number, radius: number) {\r\n\t\treturn this.drawRoundRect(x, y, w, h, radius);\r\n\t}\r\n\t\r\n\tdrawCircle(x: number, y: number, radius: number) {\r\n\t\tthis._pixiData.instance.drawCircle(x, y, radius);\r\n\t\t\r\n\t\treturn super.drawCircle(x, y, radius);\r\n\t}\r\n\t\r\n\tdc(x: number, y: number, radius: number) {\r\n\t\treturn this.drawCircle(x, y, radius);\r\n\t}\r\n\t\r\n\tdrawEllipse(x: number, y: number, w: number, h: number) {\r\n\t\tthis._pixiData.instance.drawEllipse(x, y, w, h);\r\n\t\t\r\n\t\treturn super.drawEllipse(x, y, w, h);\r\n\t}\r\n\t\r\n\tde(x: number, y: number, w: number, h: number) {\r\n\t\treturn this.drawEllipse(x, y, w, h);\r\n\t}\r\n\t\r\n\tdrawPolyStar(x: number, y: number, radius: number, sides: number, pointSize: number, angle: number) {\r\n\t\tthis._pixiData.instance.drawRegularPolygon(x, y, radius, sides, angle * DEG_TO_RAD);\r\n\t\t\r\n\t\treturn super.drawPolyStar(x, y, radius, sides, pointSize, angle);\r\n\t}\r\n\t\r\n\tdp(x: number, y: number, radius: number, sides: number, pointSize: number, angle: number) {\r\n\t\treturn this.drawPolyStar(x, y, radius, sides, pointSize, angle);\r\n\t}\r\n}\r\n\r\n// temporary prototype\r\nObject.defineProperties(CreatejsGraphics.prototype, {\r\n\t_createjsParams: {\r\n\t\tvalue: createCreatejsGraphicsParams(),\r\n\t\twritable: true\r\n\t},\r\n\t_pixiData: {\r\n\t\tvalue: createPixiGraphicsData(createObject<CreatejsGraphics>(CreatejsGraphics.prototype)),\r\n\t\twritable: true\r\n\t}\r\n});","import { Container, Text } from 'pixi.js';\r\nimport createjs from '@tawaship/createjs-module';\r\nimport { createPixiData, createCreatejsParams, IPixiData, ICreatejsParam, ITickerData, TCreatejsMask, IExpandedCreatejsDisplayObject } from './core';\r\nimport { createObject, DEG_TO_RAD } from './utils';\r\nimport { EventManager, TCreatejsInteractionEvent, ICreatejsInteractionEventDelegate } from './EventManager';\r\nimport { CreatejsButtonHelper } from './ButtonHelper';\r\nimport { CreatejsShape } from './Shape';\r\n\r\n/**\r\n * [[http://pixijs.download/release/docs/PIXI.Text.html | PIXI.Text]]\r\n */\r\nexport class PixiText extends Text {}\r\n\r\n/**\r\n * [[http://pixijs.download/release/docs/PIXI.Container.html | PIXI.Container]]\r\n */\r\nexport class PixiTextContainer extends Container {\r\n\tprivate _createjs: CreatejsText;\r\n\tprivate _text: PixiText;\r\n\t\r\n\tconstructor(cjs: CreatejsText, text: PixiText) {\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis._createjs = cjs;\r\n\t\tthis._text = text;\r\n\t}\r\n\t\r\n\tget createjs() {\r\n\t\treturn this._createjs;\r\n\t}\r\n\t\r\n\tget text() {\r\n\t\treturn this._text;\r\n\t}\r\n}\r\n\r\nexport type TTextAlign = 'left' | 'center' | 'right';\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst DEF_ALIGN: TTextAlign = 'left';\r\n\r\nexport interface ICreatejsTextParam extends ICreatejsParam {\r\n\ttext: string;\r\n\tfont: string;\r\n\tcolor: string;\r\n\ttextAlign: TTextAlign;\r\n\tlineHeight: number;\r\n\tlineWidth: number;\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction createCreatejsTextParams(text: string, font: string, color: string): ICreatejsTextParam {\r\n\treturn Object.assign(createCreatejsParams(), {\r\n\t\ttext: text,\r\n\t\tfont: font,\r\n\t\tcolor: color,\r\n\t\ttextAlign: DEF_ALIGN,\r\n\t\tlineHeight: 0,\r\n\t\tlineWidth: 0\r\n\t});\r\n}\r\n\r\nexport interface IPixiTextData extends IPixiData<PixiTextContainer> {\r\n\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction createPixiTextData(cjs: CreatejsText, text: PixiText): IPixiTextData {\r\n\tconst pixi = new PixiTextContainer(cjs, text);\r\n\t\r\n\treturn createPixiData<PixiTextContainer>(pixi, pixi.pivot);\r\n}\r\n\r\nexport interface IParsedText {\r\n\tfontSize: number;\r\n\tfontFamily: string;\r\n\tfontWeight?: string | number;\r\n}\r\n\r\n/**\r\n * @ignore\r\n */\r\nconst P = createjs.Text;\r\n\r\n/**\r\n * [[https://createjs.com/docs/easeljs/classes/Text.html | createjs.Text]]\r\n */\r\nexport class CreatejsText extends createjs.Text implements IExpandedCreatejsDisplayObject {\r\n\tprotected _pixiData: IPixiTextData;\r\n\tprotected _createjsParams: ICreatejsTextParam;\r\n\tprivate _createjsEventManager: EventManager;\r\n\t\r\n\tconstructor(text: string, font: string, color: string = '#000000', ...args: any[]) {\r\n\t\tsuper(text, font, color, ...args);\r\n\t\t\r\n\t\tthis._createjsParams = createCreatejsTextParams(text, font, color);\r\n\t\t\r\n\t\tconst _font = this._parseFont(font);\r\n\t\t\r\n\t\tconst t = new PixiText(text, {\r\n\t\t\tfontWeight: _font.fontWeight,\r\n\t\t\tfontSize: _font.fontSize,\r\n\t\t\tfontFamily: _font.fontFamily,\r\n\t\t\tfill: this._parseColor(color),\r\n\t\t\twordWrap: true\r\n\t\t});\r\n\t\t\r\n\t\tthis._pixiData = createPixiTextData(this, t);\r\n\t\tthis._pixiData.instance.addChild(t);\r\n\t\t\r\n\t\tthis._createjsEventManager = new EventManager(this);\r\n\t\t\r\n\t\tP.call(this, text, font, color, ...args);\r\n\t}\r\n\t\r\n\tget pixi() {\r\n\t\treturn this._pixiData.instance;\r\n\t}\r\n\t\r\n\tupdateForPixi(e: ITickerData) {\r\n\t\treturn true;\r\n\t}\r\n\t\r\n\tget x() {\r\n\t\treturn this._createjsParams.x;\r\n\t}\r\n\t\r\n\tset x(value) {\r\n\t\tthis._pixiData.instance.x = value;\r\n\t\tthis._createjsParams.x = value;\r\n\t}\r\n\t\r\n\tget y() {\r\n\t\treturn this._createjsParams.y;\r\n\t}\r\n\t\r\n\tset y(value) {\r\n\t\tthis._pixiData.instance.y = value;\r\n\t\tthis._createjsParams.y = value;\r\n\t}\r\n\t\r\n\tget scaleX() {\r\n\t\treturn this._createjsParams.scaleX;\r\n\t}\r\n\t\t\r\n\tset scaleX(value) {\r\n\t\tthis._pixiData.instance.scale.x = value;\r\n\t\tthis._createjsParams.scaleX = value;\r\n\t}\r\n\t\r\n\tget scaleY() {\r\n\t\treturn this._createjsParams.scaleY;\r\n\t}\r\n\t\r\n\tset scaleY(value) {\r\n\t\tthis._pixiData.instance.scale.y = value;\r\n\t\tthis._createjsParams.scaleY = value;\r\n\t}\r\n\t\r\n\tget skewX() {\r\n\t\treturn this._createjsParams.skewX;\r\n\t}\r\n\t\r\n\tset skewX(value) {\r\n\t\tthis._pixiData.instance.skew.x = -value * DEG_TO_RAD;\r\n\t\tthis._createjsParams.skewX = value;\r\n\t}\r\n\t\r\n\tget skewY() {\r\n\t\treturn this._createjsParams.skewY;\r\n\t}\r\n\t\r\n\tset skewY(value) {\r\n\t\tthis._pixiData.instance.skew.y = value * DEG_TO_RAD;\r\n\t\tthis._createjsParams.skewY = value;\r\n\t}\r\n\t\r\n\tget regX() {\r\n\t\treturn this._createjsParams.regX;\r\n\t}\r\n\t\r\n\tset regX(value) {\r\n\t\tthis._pixiData.regObj.x = value;\r\n\t\tthis._createjsParams.regX = value;\r\n\t}\r\n\t\r\n\tget regY() {\r\n\t\treturn this._createjsParams.regY;\r\n\t}\r\n\t\r\n\tset regY(value) {\r\n\t\tthis._pixiData.regObj.y = value;\r\n\t\tthis._createjsParams.regY = value;\r\n\t}\r\n\t\r\n\tget rotation() {\r\n\t\treturn this._createjsParams.rotation;\r\n\t}\r\n\t\r\n\tset rotation(value) {\r\n\t\tthis._pixiData.instance.rotation = value * DEG_TO_RAD;\r\n\t\tthis._createjsParams.rotation = value;\r\n\t}\r\n\t\r\n\tget visible() {\r\n\t\treturn this._createjsParams.visible;\r\n\t}\r\n\t\r\n\tset visible(value) {\r\n\t\tvalue = !!value;\r\n\t\tthis._pixiData.instance.visible = value;\r\n\t\tthis._createjsParams.visible = value;\r\n\t}\r\n\t\r\n\tget alpha() {\r\n\t\treturn this._createjsParams.alpha;\r\n\t}\r\n\t\r\n\tset alpha(value) {\r\n\t\tthis._pixiData.instance.alpha = value;\r\n\t\tthis._createjsParams.alpha = value;\r\n\t}\r\n\t\r\n\tget _off() {\r\n\t\treturn this._createjsParams._off;\r\n\t}\r\n\t\r\n\tset _off(value) {\r\n\t\tthis._pixiData.instance.renderable = !value;\r\n\t\tthis._createjsParams._off = value;\r\n\t}\r\n\t\r\n\taddEventListener(type: TCreatejsInteractionEvent | string, cb: ICreatejsInteractionEventDelegate | CreatejsButtonHelper, ...args: any[]) {\r\n\t\tif (!(cb instanceof CreatejsButtonHelper)) {\r\n\t\t\tif (type === 'mousedown' || type === 'rollover' || type === 'rollout' || type === 'pressmove' || type === 'pressup') {\r\n\t\t\t\tthis._createjsEventManager.add(this._pixiData.instance, type, cb);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn super.addEventListener(type, cb, ...args);\r\n\t}\r\n\t\r\n\tremoveEventListener(type: TCreatejsInteractionEvent | string, cb: ICreatejsInteractionEventDelegate, ...args: any[]) {\r\n\t\tif (!(cb instanceof CreatejsButtonHelper)) {\r\n\t\t\tif (type === 'mousedown' || type === 'rollover' || type === 'rollout' || type === 'pressmove' || type === 'pressup') {\r\n\t\t\t\tthis._createjsEventManager.remove(this._pixiData.instance, type, cb);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn super.removeEventListener(type, cb, ...args);\r\n\t}\r\n\t\r\n\tget mask() {\r\n\t\treturn this._createjsParams.mask;\r\n\t}\r\n\t\r\n\tset mask(value: TCreatejsMask) {\r\n\t\tif (value) {\r\n\t\t\tvalue.masked.push(this._pixiData.instance);\r\n\t\t\tthis._pixiData.instance.mask = value.pixi;\r\n\t\t\t\r\n\t\t\tthis._pixiData.instance.once('added', () => {\r\n\t\t\t\tthis._pixiData.instance.parent.addChild(value.pixi);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis._pixiData.instance.mask = null;\r\n\t\t}\r\n\t\t\r\n\t\tthis._createjsParams.mask = value;\r\n\t}\r\n\t\r\n\tget text() {\r\n\t\treturn this._createjsParams.text;\r\n\t}\r\n\t\r\n\tset text(text) {\r\n\t\tthis._pixiData.instance.text.text = text;\r\n\t\tthis._align(this.textAlign);\r\n\t\t\r\n\t\tthis._createjsParams.text = text;\r\n\t}\r\n\t\r\n\tprivate _parseFont(font: string): IParsedText {\r\n\t\tconst p = font.split(' ');\r\n\t\t\r\n\t\tlet w = 'normal';\r\n\t\tlet s = p.shift() || '';\r\n\t\t\r\n\t\tif (s.indexOf('px') === -1) {\r\n\t\t\tw = s;\r\n\t\t\ts = p.shift() || '';\r\n\t\t}\r\n\t\t\r\n\t\treturn {\r\n\t\t\tfontWeight: w,\r\n\t\t\tfontSize: Number((s || '0px').replace('px', '')),\r\n\t\t\tfontFamily: p.join(' ').replace(/'/g, '') //'\r\n\t\t};\r\n\t}\r\n\t\r\n\tget font() {\r\n\t\treturn this._createjsParams.font;\r\n\t}\r\n\t\r\n\tset font(font) {\r\n\t\tconst _font = this._parseFont(font);\r\n\t\tthis._pixiData.instance.text.style.fontSize = _font.fontSize;\r\n\t\tthis._pixiData.instance.text.style.fontFamily = _font.fontFamily;\r\n\t\t\r\n\t\tthis._createjsParams.font = font;\r\n\t}\r\n\t\r\n\tprivate _parseColor(color: string) {\r\n\t\treturn parseInt(color.slice(1), 16);\r\n\t}\r\n\t\r\n\tget color() {\r\n\t\treturn this._createjsParams.color;\r\n\t}\r\n\t\r\n\tset color(color) {\r\n\t\tthis._pixiData.instance.text.style.fill = this._parseColor(color);\r\n\t\t\r\n\t\tthis._createjsParams.color = color;\r\n\t}\r\n\t\r\n\tprivate _align(align: TTextAlign) {\r\n\t\tif (align === 'left') {\r\n\t\t\tthis._pixiData.instance.text.x = 0;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tif (align === 'center') {\r\n\t\t\tthis._pixiData.instance.text.x = -this._pixiData.instance.text.width / 2;\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tif (align === 'right') {\r\n\t\t\tthis._pixiData.instance.text.x =  -this._pixiData.instance.text.width;\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\t\r\n\tget textAlign() {\r\n\t\treturn this._createjsParams.textAlign;\r\n\t}\r\n\t\r\n\tset textAlign(align) {\r\n\t\tthis._pixiData.instance.text.style.align = align;\r\n\t\tthis._align(align);\r\n\t\t\r\n\t\tthis._createjsParams.textAlign = align;\r\n\t}\r\n\t\r\n\tget lineHeight() {\r\n\t\treturn this._createjsParams.lineHeight;\r\n\t}\r\n\t\r\n\tset lineHeight(height) {\r\n\t\tthis._pixiData.instance.text.style.lineHeight = height;\r\n\t\t\r\n\t\tthis._createjsParams.lineHeight = height;\r\n\t}\r\n\t\r\n\tget lineWidth() {\r\n\t\treturn this._createjsParams.lineWidth;\r\n\t}\r\n\t\r\n\tset lineWidth(width) {\r\n\t\tthis._pixiData.instance.text.style.wordWrapWidth = width;\r\n\t\tthis._align(this.textAlign);\r\n\t\t\r\n\t\tthis._createjsParams.lineWidth = width;\r\n\t}\r\n}\r\n\r\n// temporary prototype\r\nObject.defineProperties(CreatejsText.prototype, {\r\n\t_createjsParams: {\r\n\t\tvalue: createCreatejsTextParams('', '', ''),\r\n\t\twritable: true\r\n\t},\r\n\t_pixiData: {\r\n\t\tvalue: createPixiTextData(createObject<CreatejsText>(CreatejsText.prototype), new PixiText('')),\r\n\t\twritable: true\r\n\t}\r\n});","import * as PIXI from 'pixi.js';\r\nimport * as PA from './createjs/index';\r\nimport createjs from '@tawaship/createjs-module';\r\n\r\nexport interface IAnimateLibrary {\r\n\t[ name: string ]: any;\r\n}\r\n\r\nexport interface ILoadAssetOption {\r\n\t/**\r\n\t * Whether to use assets on a server in another domain.\r\n\t */\r\n\tcrossOrigin?: boolean;\r\n};\r\n\r\n/**\r\n * Load assets of createjs content published with Adobe Animate.\r\n * \r\n * @param comp Composition obtained from `AdobeAn.getComposition`.\r\n * @param basepath Directory path of Animate content.\r\n */\r\nexport function loadAssetAsync(comp: any, basepath: string, options: ILoadAssetOption = {}) {\r\n\tif (!comp) {\r\n\t\tthrow new Error('no composition');\r\n\t}\r\n\t\r\n\tconst lib: IAnimateLibrary = comp.getLibrary();\r\n\t\r\n\treturn new Promise((resolve, reject) => {\r\n\t\tif (lib.properties.manifest.length === 0) {\r\n\t\t\tresolve({});\r\n\t\t}\r\n\t\t\r\n\t\tif (basepath) {\r\n\t\t\tbasepath = (basepath + '/').replace(/([^\\:])\\/\\//, \"$1/\");\r\n\t\t}\r\n\t\t\r\n\t\tconst loader = new createjs.LoadQueue(false, basepath);\r\n\t\t\r\n\t\tloader.installPlugin(createjs.Sound);\r\n\t\t\r\n\t\tloader.addEventListener('fileload', function(evt: any) {\r\n\t\t\thandleFileLoad(evt, comp);\r\n\t\t});\r\n\t\t\r\n\t\tloader.addEventListener('complete', function(evt: any) {\r\n\t\t\tresolve(evt);\r\n\t\t});\r\n\t\t\r\n\t\tif (options.crossOrigin) {\r\n\t\t\tconst m = lib.properties.manifest;\r\n\t\t\tfor (let i = 0; i < m.length; i++) {\r\n\t\t\t\tm[i].crossOrigin = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tloader.loadManifest(lib.properties.manifest);\r\n\t})\r\n\t.then((evt: any) => {\r\n\t\tconst ss = comp.getSpriteSheet();\r\n\t\tconst queue = evt.target;\r\n\t\tconst ssMetadata = lib.ssMetadata;\r\n\t\t\r\n\t\tfor (let i = 0; i < ssMetadata.length; i++) {\r\n\t\t\tss[ssMetadata[i].name] = new createjs.SpriteSheet({\r\n\t\t\t\timages: [\r\n\t\t\t\t\tqueue.getResult(ssMetadata[i].name)\r\n\t\t\t\t],\r\n\t\t\t\tframes: ssMetadata[i].frames\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\treturn lib;\r\n\t});\r\n}\r\n\r\n// overrides\r\ncreatejs.Stage = PA.CreatejsStage;\r\ncreatejs.StageGL = PA.CreatejsStageGL;\r\ncreatejs.MovieClip = PA.CreatejsMovieClip;\r\ncreatejs.Sprite = PA.CreatejsSprite;\r\ncreatejs.Shape = PA.CreatejsShape;\r\ncreatejs.Bitmap = PA.CreatejsBitmap;\r\ncreatejs.Graphics = PA.CreatejsGraphics;\r\ncreatejs.Text = PA.CreatejsText;\r\ncreatejs.ButtonHelper = PA.CreatejsButtonHelper;\r\n\r\n// install plugins\r\ncreatejs.MotionGuidePlugin.install();\r\n\r\n/**\r\n * @ignore\r\n */\r\nfunction handleFileLoad(evt: any, comp: any) {\r\n\tconst images = comp.getImages();\r\n\tif (evt && (evt.item.type == 'image')) {\r\n\t\timages[evt.item.id] = evt.result;\r\n\t}\r\n}"],"names":["P","PA.CreatejsStage","PA.CreatejsStageGL","PA.CreatejsMovieClip","PA.CreatejsSprite","PA.CreatejsShape","PA.CreatejsBitmap","PA.CreatejsGraphics","PA.CreatejsText","PA.CreatejsButtonHelper"],"mappings":"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"}